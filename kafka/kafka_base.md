# Kafka

## kafka 使用场景

1. 活动跟踪
2. 传递消息
3. 度量指标和日志记录
4. 提交日志
5. 流处理

## kafka 总览

##### kafka 集群 1

![](../images/kafka_04.png)

1. kafka broker
2. zookeeper
3. 生产者
4. 消费者





##### kafka 集群 2

![](../images/kafka_01.png)

1. 主题
2. 分区
3. 副本和首领副本



##### 生产者

![](../images/kafka_02.png)

![](../images/kafka_05.png)

1. 消息组成
2. 序列化
3. 分区器
4. 批次



##### 消费者

![](../images/kafka_03.png)

![](../images/kafka_06.png)

1. 消费者组
2. 群组协调器







1. acks
acks参数指定了必须要有多少个分区副本收到消息，生产者才会认为消息写入是成功的。
这个参数对消息丢失的可能性有重要影响。该参数有如下选项。
•如果acks=0，生产者在成功写入消息之前不会等待任何来自服务器的响应。也就是说， 如果当中出现了问题，导致服务器没有收到消息，那么生产者就无从得知，消息也就丢 失了。不过，因为生产者不需要等待服务器的响应，所以它可以以网络能够支持的最大 速度发送消息，从而达到很高的吞吐量。
•如果ackS=l，只要集群的首领节点收到消息，生产者就会收到一个来自服务器的成功 响应。如果消息无法到达首领节点（比如首领节点崩溃，新的首领还没有被选举出来）， 生产者会收到一个错误响应，为了避免数据丢失，生产者会重发消息。不过，如果一个 没有收到消息的节点成为新首领，消息还是会丢失。这个时候的吞吐量取决于使用的是











## 创建生产者



































